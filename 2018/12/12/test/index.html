<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">test | Silent_Eの桜荘</title>
  
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "さくら荘そのSilent_E";
  mashiro_option.author_name = "Silent_E";
  mashiro_option.site_url = "https://silenteag.github.io/";
  mashiro_option.v_appId = "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz";
  mashiro_option.v_appKey = "mgOpfzbkHYqU92CV4IDlAUHQ";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/background.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
 <div class="skin-menu no-select" id="mainskin" style="position: fixed;bottom:65px;left:31px;">
    <div class="theme-controls row-container">
          <p style="text-align:center;font-family:'Monaco';font-weight:bold;color:#444"><i style="color:grey" class="fa fa-chevron-left"></i> background <i style="color:grey" class="fa fa-chevron-right"></i></p>
        <ul class="menu-list"> <li id="white-bg"> 
            <i class="fa fa-television" aria-hidden="true">
            </i>
            </li> 
            <li id="sakura-bg"> 
                <i class="iconfont icon-sakura">
                </i>
            </li>
            <li id="gribs-bg">
                <i class="fa fa-slack" aria-hidden="true">
                </i>
            </li>
            <li id="KAdots-bg">
                <i class="iconfont icon-dots">
                </i>
            </li>
            <li id="totem-bg">
                <i class="fa fa-optin-monster" aria-hidden="true">
                </i>
            </li>
            <li id="pixiv-bg">
                <i class="iconfont icon-pixiv">
                </i>
            </li>
            <li id="bing-bg">
                <i class="iconfont icon-bing">
                </i>
            </li>
            <li id="dark-bg">
                <i class="fa fa-moon-o" aria-hidden="true">
                </i>
            </li>
        </ul>
    </div>
  <hr>
  <p style="text-align:center;font-family:'Monaco';font-weight:bold;color:#444"><i style="color:grey" class="fa fa-chevron-left"></i> script <i style="color:grey" class="fa fa-chevron-right"></i></p>
  <div class="theme-controls row-container">
  <ul class="menu-list">
    <li id="empty-effect">
      <i class="fa fa-ban">
      </i>
    </li>
    <li id="sakura-rain-effect">
      <i class="iconfont icon-sakura">
      </i>
    </li>
    <li id="snowy-effect">
      <i class="fa fa-snowflake-o">
      </i>
    </li>
    <li id="lines-effect">
      <i class="fa fa-chevron-left">
      </i>
    </li>
    <li id="colorful-belts-effect">
      <i class="fa fa-map"></i>
      </i>
    </li>
    <li id="words-rain-effect">
      <i class="fa fa-font"></i>
    </li>
    <li id="point-rain-effect">
      <i class="iconfont icon-dots"></i>
    </li>
    <li id="rain-drop-effect">
      <i class="fa fa-tint"></i>
    </li>
  </ul>
  </div>	
    <canvas id="night-mode-cover">
    </canvas>
</div> 
 <div class="changeSkin-gear no-select" style="background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%; visibility: visible; bottom: 0px;"> 
  <div class="keys" id="setbtn"> 
    <button id="open-skinMenu">
        <style>
        button#open-skinMenu{
            transition: all 0.2s linear 0s;
            outline:none;
            position:fixed;
            bottom:13px;
            left:15px;
            font-size:16px;
            background-color: rgba(255,255,255,.95);
            border-radius: 20px;
            box-shadow: 0 3px 8px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.1);
        }
        button#open-skinMenu:hover{
            transition: all 0.2s linear 0s;
            background-color: rgb(255, 165, 0);
            color: rgba(255,255,255);
        }
        </style>
        <i class="iconfont icon-gear inline-block rotating">
      </i> 
        SCHEME TOOL | 主题工具 
    </button>
  </div> 
</div>  
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://silenteag.github.io/">
          <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/avatar.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>For the Life,For the World!</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/silenteag" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=333550003" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/silenteag" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/zhihu.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">さくら荘その</span>
            <span class="shironeko">Silent_E</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/转载/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/background.jpg);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/background.jpg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      test</h1>
      <p class="entry-census">
        <span>
          <a href="https://silenteag.github.io">
            <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/avatar.jpg">
          </a>
        </span>
        <span>
          <a href="https://silenteag.github.io">hojun</a>
        </span>
        <span class="bull">
        ·</span>
        2018-12-12<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h2 id="资源分享"><a href="#资源分享" class="headerlink" title="资源分享"></a>资源分享</h2><ul>
<li><p><a href="http://www.matrix67.com/blog/archives/6665#more-6665" target="_blank" rel="noopener">26 个比较概率大小的问题</a></p>
</li>
<li><p><a href="https://45475.blog.luogu.org/mathematical-expectation" target="_blank" rel="noopener">数论小白都能看懂的数学期望讲解</a></p>
</li>
</ul>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>$PS$：不需要知道太多概念，能拿来用就行了。</p>
<ul>
<li><strong>定义</strong><br><strong>样本</strong>（$\omega$）：<strong>一次</strong>随机试验产生的<strong>一个</strong>结果。<br><strong>样本空间</strong>（$\Omega$）：<strong>一个</strong>随机试验的<strong>所有</strong>可能的结果的全体，即$\Omega=\{\omega\}$。<br><strong>事件</strong>（$A$）：某一类结果，即$A\subset\Omega$。<br><strong>基本事件</strong>（$s$）：各个互斥的事件即为基本事件。</li>
</ul>
<p>我们借助<strong>样本空间S</strong>来定义概率。样本空间是<strong>基本事件</strong>的集合。</p>
<ul>
<li><strong>概率论公理</strong><br>样本空间$S$的概率分布$Pr\{\}$是一个从$S$的事件到实数的映射，它满足以下公理：<ol>
<li><strong>非负性</strong>：对于任意事件$A$，$Pr\{A\}\geqslant 0$。</li>
<li><strong>正则性</strong>：$Pr\{S\}=1$。</li>
<li><strong>可列可加性</strong>：对于两个互斥事件$A$与$B$，有$Pr\{A\cup B\}=Pr\{A\}+Pr\{B\}$。更一般地，对于任意有限或无限事件序列$A_1,A_2,…,$若其两两互斥，则有：</li>
</ol>
</li>
</ul>
<script type="math/tex; mode=display">
Pr\{\bigcup_iA_i\}=\sum Pr\{A_i\}</script><ul>
<li><strong>期望</strong></li>
</ul>
<p>简单理解，期望的意义就是<strong>概率</strong>的<strong>加权平均数</strong>。</p>
<p>假设某随机试验$X$共有$n$种互斥的事件可能发生，其中第$i$个事件发生的概率为$P_i$，价值为$X_i$，则这个随机试验的期望是$E(X)=\sum P_iX_i$。</p>
<p>期望也可以从<strong>频率</strong>的角度来理解，我们知道如果不断重复某个随机试验，某个事件发生的频率会趋近于其概率，而将发生过所有事件的价值取平均值，这个值就会趋近于这个随机试验的期望。</p>
<h2 id="期望的线性性质"><a href="#期望的线性性质" class="headerlink" title="期望的线性性质"></a>期望的线性性质</h2><script type="math/tex; mode=display">
E(X+Y)=E(X)+E(Y)....(1)</script><script type="math/tex; mode=display">
E(aX)=aE(X)..............(2)</script><script type="math/tex; mode=display">
E(XY)=E(X)E(Y)..........(3)</script><p>证明如下</p>
<p><strong>(1)式</strong>:</p>
<script type="math/tex; mode=display">
\begin{align}
E(X+Y) =& \sum_{i,j}(X_i+Y_j)P_iQ_j\\
=& \sum_{i, j} X_{i} P_{i} Q_{j}+\sum_{i, j} Y_{j} P_{i} Q_{j}\\
=& \sum_{i} X_{i} P_{i} \sum_{j} Q_{j}+\sum_{j} Y_{j} Q_{j} \sum_{i} P_{i}\\
=& \sum_{i} X_{i} P_{i}+\sum_{i} Y_{j} Q_{j}\\
=& E(X)+E(Y)
\end{align}</script><p><strong>(2)式</strong>:</p>
<script type="math/tex; mode=display">
\begin{align}
E(aX) =& \sum_iaX_iP_i \\
=& a\sum_iX_iP_i \\
=& aE(X)
\end{align}</script><p><strong>(3)式</strong>:</p>
<script type="math/tex; mode=display">
\begin{align}
E(XY)=& \sum_i\sum_jX_iY_jP_iQ_j \\
=&(\sum_iX_iP_i)(\sum_jY_jQ_j) \\
=&E(X)E(Y)
\end{align}</script><p>用数学归纳法可推广到多个。</p>
<h2 id="期望DP"><a href="#期望DP" class="headerlink" title="期望DP"></a>期望DP</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>所求结果为某事件的期望的动态规划。</p>
<p>实际上这类动态规划并不是一个新的类型，它都是在原有的动态规划的基础上，将所求的值改成了<strong>概率</strong>和<strong>期望</strong>的相关值，换句话说，这类问题的难度其实还是在动态规划的原型上，概率和期望只是表象。</p>
<p>现在大多数期望题就是手动找公式或者$DP$推出即可，只要处理好边界，然后写好方程，就行了。与常规的求解不同，数学期望经常逆向推出，但不全是。它的代码量很短，但思维难度明显较高。</p>
<p>比如数学期望的$f[x]$一般表示到了$x$这一状态还差多少，最后答案是$f[0]$。</p>
<p>总之，该推公式的还是推，该在图上跑的还是在图上跑，只是注意状态的设计。</p>
<h2 id="练手题目"><a href="#练手题目" class="headerlink" title="练手题目"></a>练手题目</h2><h3 id="入门："><a href="#入门：" class="headerlink" title="入门："></a>入门：</h3><h4 id="过河"><a href="#过河" class="headerlink" title="过河"></a><a href="https://www.luogu.org/problemnew/show/UVA12230" target="_blank" rel="noopener">过河</a></h4><p>少见的连续型随机变量题。</p>
<p>最坏情况下，过一条河需要$3<em>L/v$的时间；最好的情况下，过一条河需要$L/v$的时间，又因为船的位置随机，所以过河时间<strong>线性分布</strong>，于是期望取个平均值$2</em>L/v$就行了。</p>
<h4 id="掷骰子"><a href="#掷骰子" class="headerlink" title="掷骰子"></a><a href="https://www.luogu.org/problemnew/show/SP1026" target="_blank" rel="noopener">掷骰子</a></h4><p>考虑集合中选取一个不同于已选的新数的概率，所以可以设计$DP$方程：$f[i]$表示取了$i$种数后还需取的期望值。</p>
<p>取了$i$种数，当前取的是新数的概率是$\frac{n-i}{n}$，当前取的是集合中出现过的数的概率是$\frac{i}{n}$。所以可得到$DP$转移方程$f[i]=\frac{n-i}{n}f[i+1]+\frac{i}{n}f[i]+1$。</p>
<p>进一步化简，得$f[i]=f[i+1]+\frac{n}{n-i}$。</p>
<p>所以$f[0]=\sum_{i=1}^n\frac{n}{i}$。</p>
<h4 id="换教室"><a href="#换教室" class="headerlink" title="换教室"></a><a href="https://www.luogu.org/problem/P1850" target="_blank" rel="noopener">换教室</a></h4><p><del>夭寿啦，NOIP考期望啦</del>。</p>
<p>容易对每节课的选择划分阶段，根据期望的线性性质，可以相加得到总期望。</p>
<p>设$f[i][j][0/1]$表示前$i$节课提交了$j$次申请，当前是否申请时的期望最小体力值。那么只会从$i-1$转移过来。</p>
<p>方程见代码。（懒癌晚期。。。）</p>
<pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;algorithm&gt;
#define db double
#define Re register
const int N = 2000 + 5;
const db INF = 1e18;
using std :: max;
using std :: min;
inline int read() {
    int f = 1, x = 0; char ch;
    do { ch = getchar(); if (ch == &#39;-&#39;) f = -1; } while (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;);
    do {x = (x &lt;&lt; 3) + (x &lt;&lt; 1) + ch - &#39;0&#39;; ch = getchar(); } while (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;); 
    return f * x;
}
inline void init(), dp(), ouot();
signed main() { init(), dp(), ouot(); }
inline void hand_in() {
    freopen(&quot;classroom.in&quot;, &quot;r&quot;, stdin);
    freopen(&quot;classroom.out&quot;, &quot;w&quot;, stdout);
}
int n, m, v, e, c[N], d[N];
db k[N], f[N][N][2], dis[305][305], ans = INF;
inline void init() {
    hand_in();
    n = read(), m = read(), v = read(), e = read();
    for (Re int i = 1;i &lt;= n; ++i) c[i] = read();
    for (Re int i = 1;i &lt;= n; ++i) d[i] = read();
    for (Re int i = 1;i &lt;= n; ++i) scanf(&quot;%lf&quot;, k + i);
    for (Re int i = 1;i &lt;= v; ++i) {
        for (Re int j = 1;j &lt;= v; ++j) {
            if (i != j) dis[i][j] = INF;
        }
    }
    for (Re int i = 1, x, y, w;i &lt;= e; ++i) {
        x = read(), y = read(), w = read();
        dis[x][y] = min(dis[x][y], (db)w);
        dis[y][x] = dis[x][y];
    }
    for (Re int s = 1;s &lt;= v; ++s) {
        for (Re int i = 1;i &lt;= v; ++i) {
            for (Re int j = 1;j &lt;= v; ++j) {
                dis[i][j] = min(dis[i][j], dis[i][s] + dis[s][j]);
            }
        }
    }
}
inline void dp() {
    for (Re int i = 0;i &lt;= n; ++i) {
        for (Re int j = 0;j &lt;= m; ++j) {
            f[i][j][0] = f[i][j][1] = INF;
        }
    }
    f[1][0][0] = f[1][1][1] = 0;
    for (Re int i = 2, lim;i &lt;= n; ++i) {
        lim = min(i, m);
        f[i][0][0] = f[i - 1][0][0] + dis[c[i - 1]][c[i]];
        for (Re int j = 1;j &lt;= lim; ++j) {
            f[i][j][0] = min(f[i][j][0], f[i - 1][j][0] + dis[c[i - 1]][c[i]]);
            f[i][j][0] = min(f[i][j][0], f[i - 1][j][1] + k[i - 1] * dis[d[i - 1]][c[i]] + (1.0 - k[i - 1]) * dis[c[i - 1]][c[i]]);
            f[i][j][1] = min(f[i][j][1], f[i - 1][j - 1][0] + k[i] * dis[c[i - 1]][d[i]] + (1.0 - k[i]) * dis[c[i - 1]][c[i]]);
            f[i][j][1] = min(f[i][j][1], f[i - 1][j - 1][1] + k[i] * (k[i - 1] * dis[d[i - 1]][d[i]] + (1.0 - k[i - 1]) * dis[c[i - 1]][d[i]]) + (1.0 - k[i]) * (k[i - 1] * dis[d[i - 1]][c[i]] + (1.0 - k[i - 1]) * dis[c[i - 1]][c[i]]));
        }
    }
}
inline void ouot() {
    for (int i = 0;i &lt;= m; ++i) ans = min(ans, min(f[n][i][0], f[n][i][1]));
    printf(&quot;%.2lf&quot;, ans);
    exit(0);
}
</code></pre>
<h3 id="进阶："><a href="#进阶：" class="headerlink" title="进阶："></a>进阶：</h3><h4 id="亚瑟王"><a href="#亚瑟王" class="headerlink" title="亚瑟王"></a><a href="https://www.luogu.org/problemnew/show/P3239" target="_blank" rel="noopener">亚瑟王</a></h4><p>思考后，转化成$ans=\sum dp[i]*d[i]$，其中,$dp[i]$表示第$i$张卡在$r$轮中打出的概率。</p>
<p>考虑如何计算$dp[i]$。</p>
<p>由于每一轮打出一张卡后，该轮结束，所以每张卡在$r$轮中被打出的概率与在它前面有多少张卡被打出有关。</p>
<p>设$f[i][j]$表示在$r$轮中，前$i$张卡被打出了$j$张的概率，在此情况下，第$i+1$张牌在$r$轮中有$(1-p[i+1])^{r-j}$的概率未被打出，再用$1$减去，就得到了打出的概率。所以枚举$k$得到：$dp[i]=\sum f[i-1][k]*(1-(1-p[i])^{r-k})$。</p>
<p>现在考虑如何计算$f[i][j]$。</p>
<p>递推。当前的第$i$张卡选或不选。<br>选：$f[i][j]+=f[i-1][j-1]<em>(1-(1-p[i])^{r-j+1})$。$(j\neq 0)$<br>不选：$f[i][j]+=f[i-1][j]</em>((1-p[i])^{r-j})$。$(i\neq j)$</p>
<p>边界：<br>$f[1][1]=dp[1]=1-(1-p[1])^r$<br>$f[1][0]=(1-p[1])^r$</p>
<p>本题得到解决。（注意精度！）</p>
<pre><code class="lang-cpp">#include&lt;cmath&gt;
#include&lt;ctime&gt;
#include&lt;queue&gt;
#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#define debug() puts(&quot;FBI WARNING!&quot;)
#define ll long long
using namespace std;
const int MAX = 220 + 5;
const int P = 1e5 + 7;

inline int read(){ 
    int f = 1, x = 0;char ch;
    do { ch = getchar(); if (ch == &#39;-&#39;) f = -1; } while (ch &lt; &#39;0&#39;||ch&gt;&#39;9&#39;);
    do {x = x*10+ch-&#39;0&#39;; ch = getchar(); } while (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;); 
    return f * x;
}
int t, n, r;
double p[MAX], d[MAX], ans, f[MAX][MAX], dp[MAX], pw[MAX][MAX];
inline double mi(double a, int b) {
    double res = 1.0;
    while (b) {
        if (b &amp; 1) {
            res *= a;
        }
        a *= a;
        b &gt;&gt;= 1;
    }
    return res;
}
int main(){
    t = read();
    while (t--) {
        memset(dp, 0, sizeof (dp));
        memset(f, 0, sizeof (f));
         ans = 0;
        n = read(), r = read();
        for (int i = 1;i &lt;= n; ++i) scanf(&quot;%lf %lf&quot;, &amp;p[i], &amp;d[i]);
        f[1][1] = dp[1] = 1.0 - mi(1.0 - p[1], r);        
        f[1][0] = mi(1.0 - p[1], r);

        for (int i = 2;i &lt;= n; ++i) {
            for (int j = 0;j &lt;= min(i, r); ++j) {

                if (j) {
                    f[i][j] += f[i - 1][j - 1] * (1.0 - mi(1.0 - p[i], r - j + 1));
                }
                if (i != j) {
                    f[i][j] += f[i - 1][j] * mi(1.0 - p[i], r - j);
                }
            }
        }

        for (int i = 2;i &lt;= n; ++i) {
            for (int k = 0;k &lt;= min(i - 1, r); ++k) {
                dp[i] += f[i - 1][k] * (1.0 - mi(1.0 - p[i], r - k));
            }
        }
        for (int i = 1;i &lt;= n; ++i) {
            ans += dp[i] * d[i];
        }
        printf(&quot;%.10lf\n&quot;, ans);
    }
    return 0;
}
</code></pre>
<h4 id="概率充电器"><a href="#概率充电器" class="headerlink" title="概率充电器"></a><a href="https://www.luogu.org/problemnew/show/P4284" target="_blank" rel="noopener">概率充电器</a></h4><p>$WA$了无数遍。。。有一个坑人的小细节。。。</p>
<p>思考后，可转换成$ans=\sum (1-res[i])$。其中，$res$表示节点$i$未被充电的概率。</p>
<p>强制把这棵树转化为有根树，我们可以发现，对与任意非根节点，它能否被点亮取决于它的子节点以及它的父亲。想到树形$DP$。</p>
<p>我们设$f[i]$，$g[i]$分别表示$i$不被它的子节点点亮的概率，$i$不被它父亲点亮的概率。</p>
<p>所以$res[i]=f[i]\times g[i]$。</p>
<p>现在思考如何求$f[i]$。</p>
<p>第一遍$dfs$遍历时，直接 $f[i]=(1-p[i])\times \prod_{son\in i}\lgroup1-(1-f[son]\times val(i,son))\rgroup$，无需过多的解释。</p>
<p>由于根节点无父节点，所以$g[root]=1$，即$res[root]=f[root]$现在，思考如何求非根节点的$g[i]$。</p>
<p>做到这里，我先前有个抽风的想法，以为直接可以$g[v]=ans[u]+(1-ans[u])\times (1-val(u,v))$($v$是$u$的子节点)，当$WA$到怀疑人生时才想到这是错误的。。。想想为什么？</p>
<p>请注意，$g[i]$的状态定义是：$i$不被它<strong>父亲</strong>点亮的概率，所以不管子节点鸟事。。。即<strong>默认为$v$不带电</strong>，所以我们需要把$ans[u]$除去先前乘进$f[i]$中的$v$子树中不带电的概率。</p>
<p>即$P=\frac{g[u]\times f[u]}{1-(1-f[v]\times val(u,v))}$，$g[v]=P+(1-P)\times (1-val(u,v))$。</p>
<p>本题得到$O(n)$解决。</p>
<pre><code class="lang-cpp">#include&lt;cmath&gt;
#include&lt;ctime&gt;
#include&lt;queue&gt;
#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
using namespace std;
const int MAX = 500000 + 5;
inline int read(){ 
    int f = 1, x = 0;char ch;
    do { ch = getchar(); if (ch == &#39;-&#39;) f = -1; } while (ch &lt; &#39;0&#39;||ch&gt;&#39;9&#39;);
    do {x = x*10+ch-&#39;0&#39;; ch = getchar(); } while (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;); 
    return f * x;
}
int n, m;
double p[MAX], ans[MAX], res, f[MAX], g[MAX], h[MAX];

struct sakura {
    int to, nxt;
    double p;
}sak[MAX &lt;&lt; 1]; int head[MAX], cnt;

inline void add(int x, int y, double p) {
    ++cnt;
    sak[cnt].to = y, sak[cnt].nxt = head[x], sak[cnt].p = p, head[x] = cnt;
}

inline void dfs_1(int u, int fa) {
    f[u] = 1.0 - p[u];
    g[u] = 1.0;
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double ps = sak[i].p;
        if (v == fa) continue;
        dfs_1(v, u);
//        f[u] *= (1.0 - (1.0 - f[v]) * ps);
        f[u] *= (f[v] + (1.0 - f[v]) * (1.0 - ps));
    }
}

inline void dfs_2(int u, int fa) {
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double ps = sak[i].p;
        if (v == fa) continue;
        double h;
        if (f[v] + (1.0 - f[v]) * (1.0 - ps)) {
           h = (g[u] * f[u]) / (f[v] + (1.0 - f[v]) * (1.0 - ps));            
        }
        else h = 0.0;
        g[v] = h + (1.0 - h) * (1.0 - ps);
        dfs_2(v, u);
    }
}
int main(){
    n = read();
    for (int i = 1;i &lt; n; ++i) {
        int a = read(), b = read();
        double c; scanf(&quot;%lf&quot;, &amp;c);
        add(a, b, 0.01 * c);
        add(b, a, 0.01 * c);
    }
    for (int i = 1;i &lt;= n; ++i) 
        scanf(&quot;%lf&quot;, &amp;p[i]), p[i] *= 0.01;
    dfs_1(1, 0);
    dfs_2(1, 0);
    g[1] = 1;
    for (int i = 1;i &lt;= n; ++i) {
        ans[i] = f[i] * g[i];
    }
    for (int i = 1;i &lt;= n; ++i) 
        res += (1.0 - ans[i]);
    printf(&quot;%.6lf&quot;, res);
    return 0;
}
</code></pre>
<h4 id="奖励关"><a href="#奖励关" class="headerlink" title="奖励关"></a><a href="https://www.luogu.org/problemnew/show/P2473" target="_blank" rel="noopener">奖励关</a></h4><p>刚拿到这题。</p>
<p>？？？</p>
<p>$Woc$！怎么做？</p>
<p>好在看了眼数据范围，，，哦，，，状压套个期望啊。。。</p>
<p>倒着找，就行了。</p>
<pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#define Re register
using namespace std;
const int MAX = 100 + 5;
inline int read(){ 
    int f = 1, x = 0;char ch;
    do { ch = getchar(); if (ch == &#39;-&#39;) f = -1; } while (ch &lt; &#39;0&#39;||ch&gt;&#39;9&#39;);
    do {x = x*10+ch-&#39;0&#39;; ch = getchar(); } while (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;); 
    return f * x;
}
int k, n, miko[MAX];
double f[MAX][1 &lt;&lt; 15], a[MAX], ans;
int main(){
    k = read(), n = read();
    for (int i = 1;i &lt;= n; ++i) {
        scanf(&quot;%lf&quot;, &amp;a[i]);
        int x;
        while (x = read()) {
            miko[i] = miko[i] | (1 &lt;&lt; (x - 1));            
        }
    }
    for (int i = k;i &gt;= 1; --i) {
        for (int j = 0;j &lt; (1 &lt;&lt; n); ++j) {
            for (int l = 1;l &lt;= n; ++l) {
                if ((j &amp; miko[l]) == miko[l]) {
                    f[i][j] += max(f[i + 1][j | (1 &lt;&lt; (l - 1))] + a[l], f[i + 1][j]);
                }
                else {
                    f[i][j] += f[i + 1][j];
                }
            }
            f[i][j] /= n;
        }
    }
    printf(&quot;%.6lf\n&quot;, f[1][0]); 
}
</code></pre>
<h4 id="迷失游乐园"><a href="#迷失游乐园" class="headerlink" title="迷失游乐园"></a><a href="https://www.luogu.org/problemnew/show/P2081" target="_blank" rel="noopener">迷失游乐园</a></h4><p><strong>马马马？？？</strong></p>
<p>是树的情况貌似和前面的看脸充电器差不多？？？搞一下。</p>
<p>我们设从一个节点$i$的子节点传上来的期望值为$f[i]$，从父节点传下来的期望值为$g[i]$，令$u$为$v$的父节点，所以可得$f[u]=\frac{\sum f[v]+w(u,v)}{son[u]}$，然后以此更新$g[v]$：$g[v]=w(u,v)+\frac{f[u]\times son[u]-w(u,v)-f[v]+g[u]}{son[u]-1+1}$。</p>
<p>具体含义就$YY$一下吧，懒癌晚期。。。</p>
<p>$About$ $1h$ $later…$ $have$ $50$ $Pt$ $…$</p>
<p>好了，现在处理环的情况！  </p>
<p>$Another$ $1h$ $later…$ </p>
<p>$Woc$！环怎么处理啊！</p>
<p>偷偷瞟了眼题解，稍微有了点思路。</p>
<p>首先，从基环树环上节点的子节点传上来的更新是一样的，这点没有任何怀疑。主要是$g[i]$的更新。</p>
<p>对于环上的点，我们默认为它们的父亲即为环上与它相邻的两个节点。所以它分别有一半的概率走到与它相邻的两个节点上。  </p>
<p>所以，我们强迫它先顺序走一遍，再逆序走一遍，最后两个期望值相加再除以$2$，即可得到$g[x]$。</p>
<p>$g[i]=\sum P_j\times (w(j-1,j)+f[j]\times \frac{son[j]}{son[j]+1})$</p>
<p>其中,$P_j$表示为走到环上节点$j$的概率。</p>
<p>然后环上的$g[x]$更新了，就可以对于环上每个节点所形成的子树进行遍历更新了。</p>
<p>$g[v]=w(u,v)+\frac{fat[u]\times g[u]+f[u]\times son[u]-f[v]-w(u,v)}{fat[u]+son[u]-1}$</p>
<p>其中，$fat[x]$表示$x$父节点的个数。</p>
<p>找环简单说一下，直接开栈记录就行了。</p>
<p>再吐槽一下，这题我改了一下午加一晚上，还是红彤彤的，后来一气之下全员$double$，，，然后，，，它就过了。。。</p>
<p>这题必须代码。</p>
<pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;iostream&gt;
#include&lt;algorithm&gt;
#define Re register
#define C(x) circle[x] 
#define T(x) tag[x]
const int MAX = 100000 + 5;
inline int read(){ 
    int f = 1, x = 0;char ch;
    do { ch = getchar(); if (ch == &#39;-&#39;) f = -1; } while (ch &lt; &#39;0&#39;||ch&gt;&#39;9&#39;);
    do {x = x*10+ch-&#39;0&#39;; ch = getchar(); } while (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;); 
    return f * x;
}
struct sakura { int  to, nxt, w; }sak[MAX &lt;&lt; 1]; int head[MAX], cnt;
double f[MAX], ans, g[MAX], res, son[MAX], P, dis[25][25], fat[MAX];
int stack[MAX], top, vis[MAX], circle[MAX], count, num, st, nex[MAX], pre[MAX], tag[MAX];
bool find = 0;
inline void add(int x, int y, int w) { ++cnt; sak[cnt].to = y, sak[cnt].nxt = head[x], sak[cnt].w = w, head[x] = cnt; } 

/* 找环 */ 
inline void pre_dfs_1(int u, int fa) {
    if (find) return;
    vis[u] = 1, stack[++top] = u;
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        if (v == fa) continue;
        if (vis[v]) {
            while (stack[top] != v) { circle[++count] = stack[top--]; }
            circle[++count] = stack[top];
            find = 1;
            return;
        }
        else {
            pre_dfs_1(v, u);    
            stack[--top], vis[v] = 0;
        }
    }
}

/* 找距离 */ 
bool first = 1;
inline void pre_dfs_2(int u, int fa, double w) {
    if (u == st &amp;&amp; !first) {
        dis[T(u)][T(fa)] = dis[T(fa)][T(u)] = w;
        return;
    }
    first = 0;
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double s = sak[i].w;
        if (v == fa || !vis[v]) continue;
        dis[T(u)][T(v)] = dis[T(v)][T(u)] = s;
        pre_dfs_2(v, u, s);
    }
}

/* douwn */
inline void dfs(int u, int fa) {
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double w = sak[i].w;
        if (v == fa || vis[v]) continue;
        dfs(v, u);
        son[u] ++;
        f[u] += (1.0 * f[v] + w);
    }
    if (son[u]) f[u] /= son[u];
}

/* up */
inline void re_dfs(int u, int fa, double w) {
   g[u] = w;
    if(fat[fa] + son[fa] &gt; 1)
        g[u] += (fat[fa] * g[fa] + son[fa] * f[fa] - f[u] - w) / (fat[fa] + son[fa] - 1);
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double w = sak[i].w;
        if (v == fa || vis[v]) continue;
        re_dfs(v, u, w);
    }
}

/* m = n-1 */
inline void dfs_tree(int u, int fa) {
    for (int i = head[u];i;i = sak[i].nxt) {
        int v = sak[i].to;
        double w = sak[i].w;
        if (v == fa) continue;
        if (u != st) 
            g[v] = w + (f[u] * son[u] - w - f[v] + g[u]) / son[u]; 
        else {
            if (son[u] == 1) {
                g[v] = w;
            }
            else {
                g[v] = w + (f[u] * son[u] - w - f[v] + g[u]) / (son[u] - 1);
            }
        }
        dfs_tree(v, u);
    }
} 

int n, m; 
int main(){
    n = read(), m =  read();
    for (Re int i = 1;i &lt;= m; ++i) {
        int x = read(), y = read(), z = read();
        add(x, y, z), add(y, x, z);
    }
    if (m != n) {
        /* 树的情况比较好转移 */
        st = 1;
        dfs(st, 0);
        dfs_tree(st, 0);
        for (int i = 1;i &lt;= n; ++i) {
            if (i == st) {
                res += (f[i] * son[i] + g[i]) / son[i];
            }
            else {
                res += (f[i] * son[i] + g[i]) / (son[i] + 1);
            }

        }
        printf(&quot;%.5lf&quot;, res / (1.0 * n));       
        return 0;
    }
    else {
        /* 找环 */
        pre_dfs_1(1, 0);

        /* 标记 &amp; 映射 */
        memset(vis, 0, sizeof (vis));
        for (Re int i = 1;i &lt;= count; ++i) vis[circle[i]] = 1, tag[circle[i]] = i;

        /* 找距离 */ 
        st = circle[1];
        pre_dfs_2(circle[1], 0, 0);

        /* 对于每个环上的点down下去 */
        for (Re int i = 1;i &lt;= count; ++i) dfs(circle[i], 0);

        for (int i = 1;i &lt;= n; ++i) {
            if (vis[i]) {
                fat[i] = 2.0;
                //在环上父亲数为 2 
            }
            else {
                fat[i] = 1.0;
                //不在环上父亲数为 1 
            }
        }

        /* 处理信息 */
        for (int i = 1;i &lt;= count; ++i) {
            nex[circle[i]] = circle[i + 1];
            pre[circle[i]] = circle[i - 1];
        }
        pre[circle[1]] = circle[count];
        nex[circle[count]] = circle[1];

        /* 更新环上的g[x] */
        for (Re int i = 1;i &lt;= count; ++i) {
            int nows = C(i);           
            /* 正序来一遍 */
            P = 1.0;
            for (Re int j = nex[nows];j != nows; j = nex[j]) {
                double w = dis[tag[pre[j]]][tag[j]];
                if (nex[j] == nows) 
                     g[nows] += P * (w + f[j]);
                else 
                    g[nows] += P * (w + f[j] * son[j] / (son[j] + 1));
                P /= (son[j] + 1);
            }
            /* 逆序来一遍 */
            P = 1.0;            
            for (Re int j = pre[nows];j != nows; j = pre[j]) {
                double w = dis[tag[nex[j]]][tag[j]];
                if (pre[j] == nows) 
                    g[nows] += P * (w + f[j]);
                else 
                    g[nows] += P * (w + f[j] * son[j] / (son[j] + 1));
                P /= (son[j] + 1);
            }
            /* 除 2 */
            g[nows] /= 2.0;
        }

        /* 更新非环节点g[x] */
        for (int i = 1;i &lt;= count; ++i) {
            for (int j = head[C(i)];j;j = sak[j].nxt) {
                if (!vis[sak[j].to]) re_dfs(sak[j].to, circle[i], sak[j].w);
            }
        }

        /* 统计答案 */
        for (int i = 1;i &lt;= n; ++i) 
            res += ((g[i] * fat[i]) + f[i] * son[i]) / (fat[i] + son[i]);
        printf(&quot;%.5lf&quot;, res / (1.0 * n));
        return 0;       
    }
}
</code></pre>
<h2 id="一点小总结"><a href="#一点小总结" class="headerlink" title="一点小总结"></a>一点小总结</h2><p>概率$DP$怎么说呢，真的还是以推$DP$式子为主，但其中有些和其它$DP$不一样，比如，概率作为状态时一般是反着来的，还有就是当一个状态的概率不好表示时，想想去表示它相反的概率，抑或者用容斥原理把概率给硬搞出来，期望同理。</p>
<p>还有就是在$OI$的运用中，大多数题目都是离散型变量，很少连续型的，注意一下它俩的区别。</p>

        </div>
        <!-- .entry-content -->
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre full previous">
          
            <a href="/2018/12/12/Hexo-Theme-Sakura/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://static.2heng.xin/wp-content/uploads//2019/02/wallhaven-672007-1-1024x576.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://static.2heng.xin/wp-content/uploads//2019/02/wallhaven-672007-1-1024x576.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                Hexo-Theme-Sakura</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
      </section>
      
      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <a href="https://silenteag.github.io" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/avatar.jpg" itemprop="image" alt="hojun" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="https://silenteag.github.io" itemprop="url" rel="author">hojun</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>一个好奇的人</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Silent_E<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/silenteag/cdn@1.2/img/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">さくら荘そのSilent_E</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/silenteag" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=1223610721&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/转载/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>